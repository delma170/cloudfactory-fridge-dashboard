export default async function handler(req, res) {
  const token = process.env.HA_TOKEN;
  const baseUrl = process.env.HA_BASE_URL;
  const hours = req.query.hours || 24;

  // Fetch sensor data using /api/history/ endpoint
  const url = `${baseUrl}/api/history/period/${new Date(Date.now() - hours * 3600000).toISOString()}?filter_entity_id=sensor.kitchen_temperature,sensor.kitchen_humidity,sensor.kitchen_battery`;

  const response = await fetch(url, {
    headers: {
      Authorization: `Bearer ${token}`
    }
  });

  const history = await response.json();
  // Parse history...
  res.status(200).json(parsedData);
}
