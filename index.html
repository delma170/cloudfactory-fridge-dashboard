<script>
  async function loadData() {
    try {
      const res = await fetch("/api/fridge");
      const data = await res.json();

      for (const id in data) {
        const el = document.getElementById(id);
        if (data[id].error) {
          el.innerText = "Error loading data";
        } else {
          el.innerText = `${data[id].name}: ${data[id].state} Â°C`;
        }
      }
    } catch {
      document.querySelectorAll(".temp").forEach(el => {
        el.innerText = "Error loading data";
      });
    }
  }

  loadData();
</script>
